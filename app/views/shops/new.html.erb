<div class="shops-new">
  <div class="header">
    <div class="headerinline">
      <h1 class="header-title">ランチマップ</h1>
      <div class="header-list-box"> 
        ログアウト
      </div>
    </div>
  </div> 
  <div class="format">
    <div class="format-title">
      <h1>お店登録</h1>
    </div> 
    <div id='map'></div>

    <input id="address" type="textbox" placeholder="場所を入力してください">
    <input type="button" value="表示" onclick="codeAddress()">
    <div id="display">情報入力</div>


    <style>
    #map { height: 600px;width: 600px;}

    </style>

    <script>
    let map
    let geocoder
    const display = document.getElementById('display')

    function initMap(){
      geocoder = new google.maps.Geocoder()

      map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: 35.681236, lng:139.767125},
        zoom: 15,
      });

      marker = new google.maps.Marker({
        position:  {lat: 35.681236, lng:139.767125},
        map: map
      });
    }

    function codeAddress(){
      let inputAddress = document.getElementById('address').value;

      geocoder.geocode( { 'address': inputAddress}, function(results, status) {
        if (status == 'OK') {
          map.setCenter(results[0].geometry.location);
          let marker = new google.maps.Marker({
              map: map,
              position: results[0].geometry.location
          });
          display.textContent = "検索結果：" + results[ 0 ].geometry.location
        } else {
          alert('該当する結果がありませんでした：' + status);
        }
      });   
    }

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?language=ja&region=JP&key=AIzaSyAD_hqgyKELzdJcgXRshABtsr5UZv3yKck&callback=initMap" async defer></script>


    <%= render 'form', shop: @shop %>

    <%= link_to 'Back', shops_path %>
  </div>
</div>
<div class="spnew">
  <div class="header">
    <div class="headerinline">
      <h1 class="header-title">ランチマップ</h1>
      <div class="header-list-box"> 
        ログアウト
      </div>
    </div>
  </div>
  <div class="spnewMain">
    <div class="format-title">
      <h1>お店登録</h1>
    </div> 
    <%= form_with(model: @shop, local: true) do |form| %>
      <div class="spnewMain_contents">
        <div id='map'></div>
          <div class="spnewMain_contents__content">
            <h2 class="spnewMain_contents__content__head"></h2>
              情報を入力
            <div class="spnewMain_contents__content">
              <div class="spnewMain__content__file">
                <div class="spnewMain__content__file__up">
                  <div class="h3.sell__main__content__file__up__head">
                    出品画像
                    <span class="form-require">
                      必須
                    </span>
                  </div>
                  <div class="spnewMain__content__form">
                    <%= form.label :店名 %>
                    <span class="form-require">必須</span>
                    <%= form.text_field :name %>
                  </div>
                  <div class="spnewMain__content__form">
                    <%= form.label :住所 %>
                    <span class="form-require">必須</span>
                    <%= form.text_field :address %>
                  </div>
                  <div class="spnewMain__content__form">
                    <%= form.label :所要時間 %>
                    <span class="form-require">必須</span>
                    <select>
                      <option value="0">5分</option>
                      <option value="1">10分</option>
                      <option value="２">15分</option>
                      <option value="３">20分</option>
                    </select>
                  </div>
                  <div class="spnewMain__content__form">
                    <%= form.label :値段 %>
                    <span class="form-require">必須</span>
                    <select>
                      <option prompt"平均価格を選んでください"></option>
                      <option value="0">500円</option>
                      <option value="1">500円~800円</option>
                      <option value="２">15分</option>
                      <option value="３">20分</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>  
      </div>
    <% end %>  
  </div>
</div>
